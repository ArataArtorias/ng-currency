"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ng-currency"),angular.module("ng-currency",[]).directive("ngCurrency",["$filter","$locale",function(n,e){return{require:"ngModel",scope:{min:"=min",max:"=max",currencySymbol:"@",ngRequired:"=ngRequired",fraction:"=?fraction"},link:function(r,t,i,u){function o(n){return RegExp("\\d|\\-|\\"+n,"g")}function a(n){return RegExp("\\-{0,1}((\\"+n+")|([0-9]{1,}\\"+n+"?))&?[0-9]{0,"+r.fraction+"}","g")}function c(t){t=String(t);var i=e.NUMBER_FORMATS.DECIMAL_SEP,u=null,c=n("currency")("-1",f(),r.fraction),l=c.indexOf("1"),d=c.substring(0,l);return t=t.replace(d,"-"),RegExp("^-[\\s]*$","g").test(t)&&(t="-0"),o(i).test(t)&&(u=t.match(o(i)).join("").match(a(i)),u=u?u[0].replace(i,"."):null),u}function f(){return angular.isDefined(r.currencySymbol)?r.currencySymbol:e.NUMBER_FORMATS.CURRENCY_SYM}function l(){for(var n=u.$formatters,e=n.length,r=u.$$rawModelValue;e--;)r=n[e](r);u.$setViewValue(r),u.$render()}"false"!==i.ngCurrency&&(r.fraction="undefined"!=typeof r.fraction?r.fraction:2,u.$parsers.push(function(n){var e=c(n);return("."==e||"-."==e)&&(e=".0"),parseFloat(e)}),t.on("blur",function(){u.$commitViewValue(),l()}),u.$formatters.unshift(function(e){return n("currency")(e,f(),r.fraction)}),u.$validators.min=function(n){return!r.ngRequired&&isNaN(n)?!0:"undefined"!=typeof r.min?n>=parseFloat(r.min):!0},r.$watch("min",function(n){u.$validate()}),u.$validators.max=function(n){return!r.ngRequired&&isNaN(n)?!0:"undefined"!=typeof r.max?n<=parseFloat(r.max):!0},r.$watch("max",function(n){u.$validate()}),u.$validators.fraction=function(n){return n&&isNaN(n)?!1:!0},r.$on("currencyRedraw",function(){u.$commitViewValue(),l()}))}}}]);